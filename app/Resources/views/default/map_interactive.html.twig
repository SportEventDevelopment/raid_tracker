
<!DOCTYPE HTML>
<html>
  <head>
    <title>Carte Interactive</title>
    <style type="text/css">
      html {
          width: 100%;
          height: 100%;
      }
      body {
        width: 95%;
        height: 95%;
        margin: auto;
      }
      #basicMap {
        width: 100%;
        height: 100%;
      }
    </style>
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script>
      function init() {
        map = new OpenLayers.Map("basicMap");
        var mapnik = new OpenLayers.Layer.OSM();
        map.addLayer(mapnik);
        latitude = 2.43896484375;    //3
        longitude = 46.52863469527167; //47.5 ,
        echelle = 6;

        map.setCenter(new OpenLayers.LonLat(latitude,longitude) // Centre de la carte
          .transform(
            new OpenLayers.Projection("EPSG:4326"), // transformation de WGS 1984
            new OpenLayers.Projection("EPSG:900913") // en projection Mercator sphérique
          ), echelle // Zoom level
        );

        var positionUser = function() {
              if(navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(showPosition);
              }
              else {
                  alert("La localisation n'est pas disponible avec votre navigateur !");
              }
          }

          var showPosition = function(position) {
              latitude = position.coords.longitude;
              longitude = position.coords.latitude; //position.coords.longitude
              echelle = 18;

              map.setCenter(new OpenLayers.LonLat(latitude,longitude) // Centre de la carte
                .transform(
                  new OpenLayers.Projection("EPSG:4326"), // transformation de WGS 1984
                  new OpenLayers.Projection("EPSG:900913") // en projection Mercator sphérique
                ), echelle // Zoom level
              );

              var lonLat = new OpenLayers.LonLat( latitude ,longitude )
                .transform(
                    new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
                    new OpenLayers.Projection("EPSG:900913")
                );

              var markers = new OpenLayers.Layer.Markers("Markers");
              map.addLayer(markers);
              markers.addMarker(new OpenLayers.Marker(lonLat));
          }

        positionUser();
      }
    </script>

  </head>
  <body onload="init();">
    <div id="basicMap"></div>
  </body>
</html>
